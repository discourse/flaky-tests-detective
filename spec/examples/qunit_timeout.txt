Note: checking out 'origin/tests-passed'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 9a81cb9... FIX: ensure we remove tempfiles from disk when creating an upload
[2020-08-07 12:55:10] bundle exec rake qunit:test['900000']
yarn install v1.22.4
$ node -e "if(process.env.npm_execpath.indexOf('yarn') === -1) throw new Error('NPM is not supported, please use Yarn instead. ')"
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
warning " > eslint-plugin-lodash@6.0.0" has unmet peer dependency "eslint@>=2.10.0".
[4/4] Building fresh packages...
Done in 2.06s.
Warming up Rails server
Rails server is warmed up
node /var/www/discourse/test/run-qunit.js http://localhost:60099/qunit?hidepassed=1\&seed=211290936237121533750562887328962064397 900000
navigate to http://localhost:60099/qunit?hidepassed=1&seed=211290936237121533750562887328962064397
DEBUG: -------------------------------
DEBUG: Ember  : 3.12.2
DEBUG: jQuery : 3.5.0
DEBUG: -------------------------------

Running: {"hidepassed":"1","seed":"211290936237121533750562887328962064397"}

↪ Acceptance: Group::Anonymous Viewing Automatic Group [✔]
↪ widget:post::like count button [✔]
↪ Acceptance: Topic move posts::group moderator moving posts [✔]
↪ Acceptance: User Preferences::connected accounts [✔]
↪ Acceptance: User's bookmarks::removing a bookmark with a reminder shows a confirmation [✔]
↪ model:category::search with category slug [✔]
↪ Acceptance: Composer topic featured links::onebox with title but extra words in title field [✔]
↪ Report::sevenDaysTrend [✔]
↪ Acceptance: Composer and uncategorized is not allowed::Disable body until category is selected [✔]
↪ Acceptance: Tags::list the tags [✔]
↪ model:topic-tracking-state::mute topic [✔]
↪ widget:post::whisper [✔]
↪ widget:post::delete topic button - can't delete [✔]
↪ model:post-stream::staging and undoing a new post [✔]
↪ Acceptance: Admin - Site Texts::search for a key [✔]
↪ widget:hamburger-menu::top categories [✔]
↪ widget:post-links::duplicate links [✔]
↪ controller:create-account::passwordValidation [✔]
↪ Acceptance: User's bookmarks::listing users bookmarks - no bookmarks [✔]
↪ d-button::aria-label [✔]
↪ Acceptance: Composer Actions::replying to post as TL3 user [✔]
↪ lib:keyboard-shortcuts::prevSection calls _changeSection with -1 [✔]
↪ Acceptance: Topic move posts::moving all posts [✔]
↪ themes-list-item::pending updates [✔]
↪ widget:post::change owner [✔]
↪ Acceptance: Search::Right filters are shown to logged-in users [✔]
↪ lib:category-link::allowUncategorized [✔]
↪ Acceptance: Bookmarking::Cancelling saving a bookmark [✔]
↪ lib:i18n::extra translations [✔]
↪ rest-model::destroyRecord [✔]
↪ lib:resolver::finds templates in top level dir [✔]
↪ service:store::find with query param [✔]
↪ Acceptance: Group Card - Mobile::group card [✔]
↪ widget:post::reply - without permissions [✔]
↪ lib:pretty-text::Traditional Line Breaks [✔]
↪ lib:emoji::Emoji search [✔]
↪ widget:base::widget attributes are passed in via args [✔]
↪ select-kit/category-drop::none [✔]
↪ lib:emoji-emojiStore::favorites [✔]
↪ Acceptance: Composer - Edit conflict::Should not send originalText when posting a new reply [✔]
↪ select-kit/category-drop::[not staff - TL1] displayCategoryDescription [✔]
↪ Acceptance: Topic - Quote button - anonymous::Shows single share button when site setting only has one item [✔]
↪ controller:topic::togglePostSelection [✔]
↪ widget:post::flagging: can't flag when post is hidden [✔]
↪ widget:post::unhide post [✔]
↪ Acceptance: Search - Full Page::escape search term [✔]
↪ rest-model::updating simultaneously [✔]
↪ widget:post::topic map - few posts [✔]
↪ controller:bookmark::showLaterThisWeek returns true if < Thursday [✔]
↪ lib:to-markdown::supporting html tags by keeping them [✔]
↪ model:user-badge::createFromJson single [✔]
↪ select-kit/category-drop::shortcuts:category is set [✔]
↪ lib:uploads::ensures an authorized upload [✔]
↪ lib:uploads::isImage [✔]
↪ model:post-stream::cancelFilter [✔]
↪ Acceptance: Enforce Second Factor::as an admin [✔]
↪ lib:pretty-text::tags with arguments [✔]
↪ value-list::selecting a value [✔]
↪ model: UserStream::filterParam [✔]
↪ lib:get-url::getAbsoluteURL [✔]
↪ d-editor::bold with a multiline selection [✔]
↪ widget:post::expand first post [✔]
↪ select-kit/topic-notifications-options::regular topic notification level descriptions [✔]
↪ Acceptance: Topic Discovery - Mobile::Visit Discovery Pages [✔]
↪ controller:create-account::authProviderDisplayName [✔]
↪ Acceptance: Category Edit::Editing the category [✔]
↪ model:composer::title placeholder depends on what you're doing [✔]
↪ Acceptance: User Anonymous::Restricted Routes [✔]
↪ select-kit/select-kit:api::modifySelectKit(identifier).onChange [✔]
↪ lib:user-search::it returns cancel when eager completing with no results [✔]
↪ lib:search::searchContextDescription [✔]
↪ Acceptance: User Anonymous::Badges [✔]
↪ Acceptance: Tag info::admin can manage tags [✔]
↪ lib:pretty-text::Oneboxing [✔]
↪ widget:poster-name::basic rendering [✔]
↪ lib:click-track::it opens in a new tab when pressing shift [✔]
↪ Acceptance: Search::search [✔]
↪ model:badge::createFromJson single [✔]
↪ Acceptance: Admin - Site Settings::changing value updates dirty state [✔]
↪ lib:sanitizer::urlAllowed [✔]
↪ model:post-stream::create [✔]
↪ Acceptance: Search - Full Page::perform various searches [✔]
↪ select-kit/single-select::value [✔]
↪ Acceptance: User::Notifications [✔]
↪ Acceptance: Topic Discovery::Live update unread state [✔]
↪ lib:pretty-text::quote formatting [✔]
↪ Acceptance: Managing Group Tag Notification Defaults::As an admin [✔]
↪ Acceptance: Topic::Visit topic routes [✔]
↪ service:store::meta types [✔]
↪ Acceptance: Admin - Suspend User::suspend a user - cancel [✔]
↪ lib:to-markdown::stripes unwanted inline tags [✔]
↪ Acceptance: Login redirect::redirects login to default homepage [✔]
↪ highlighted-code::large code blocks are not highlighted [✔]
↪ widget:post::replies - no replies [✔]
↪ d-button::title [✔]
↪ widget:base::buildId [✔]
↪ lib:pretty-text::quoting a quote [✔]
↪ widget:topic-status::extendability [✔]
↪ Acceptance: Dashboard::tabs [✔]
↪ lib:click-track::does not update badge clicks on my own link [✔]
↪ image-uploader::without image [✔]
↪ lib:click-track::tracks internal URLs [✔]
↪ lib:pretty-text::Unbalanced underscores [✔]
↪ lib:emoji-emojiStore::track [✔]
↪ select-kit/pinned-options::unpinning [✔]
↪ select-kit/category-chooser::with disallowed uncategorized, none [✔]
↪ widget:post-links::collapsed links [✔]
↪ preload-store::getAndRemove returns a promise that resolves to the result of the finder's promise [✔]
↪ lib:pretty-text::Links [✔]
↪ Acceptance: Admin - Site Settings::filter settings by plugin name [✔]
↪ lib:to-markdown::converts inline nested styles [✔]
↪ Acceptance: Review::Flag related  [✔]
↪ admin-report::default [✔]
↪ d-editor::preview sanitizes HTML [✔]
↪ model:category::slugFor [✔]
↪ select-kit/category-chooser::with allowUncategorized=null rootNone=true [✔]
↪ controller:topic::deletePost - no modal is shown if post does not have replies [✔]
↪ widget:hamburger-menu::top categories - anonymous [✔]
↪ widget:base::handlebars i18n [✔]
↪ lib:pretty-text::extractDataAttribute [✔]
↪ Acceptance: Search - Full Page::update min post count through advanced search ui [✔]
↪ model:composer::Title length for static page topics as admin [✔]
↪ service:store::findStale with no stale results [✔]
↪ lib:resolver::resolves precedence between overlapping top level dir and first level subdir templates [✔]
↪ widget:user-menu::anonymous - disabled [✔]
↪ model:post-stream::staging and committing a post [✔]
↪ select-kit/category-chooser::with value [✔]
↪ Acceptance: New Message::accessing new-message route when logged in [✔]
↪ lib:pretty-text::Quotes [✔]
↪ Acceptance: Signing In::sign in - not activated - edit email [✔]
↪ user-selector::pasting a list of usernames [✔]
↪ Acceptance: Admin - Site Settings::shows all_results if current category has none [✔]
↪ Acceptance: User Directory::Visit With Group Filter [✔]
↪ model:composer::open with a quote [✔]
↪ Acceptance: Enforce Second Factor::as a user [✔]
↪ widget:hamburger-menu::staff menu - admin [✔]
↪ Acceptance: Topic - Anonymous::Enter without access [✔]
↪ Acceptance: Composer::Composer can toggle between reply and createTopic [✔]
↪ lib:key-value-store::it's able to get the result back from the store [✔]
↪ Acceptance: Topic::Reply as new topic [✔]
↪ Report::thirtyDaysCountTitle [✔]
↪ model:post-stream::appendMore for megatopic [✔]
↪ date-input::allows mutations through actions [✔]
↪ date-time-input::allows mutations through actions [✔]
↪ value-list::removing a value [✔]
↪ widget:user-menu::bookmarks [✔]
↪ select-kit/category-drop::countSubcategories (default: false) [✔]
↪ select-kit/topic-notifications-button::the header has a localized title  [✔]
↪ Acceptance: Managing Group Category Notification Defaults::As a group owner [✔]
↪ lib:utilities::inCodeBlock - runs fast [✔]
↪ Acceptance: Dashboard::general tab [✔]
↪ Acceptance: Account Created::account created - resend email [✔]
↪ lib:i18n::fallback [✔]
↪ d-editor::italic button with a selection [✔]
↪ component:group-membership-button::canLeaveGroup [✔]
↪ model:user-badge::createFromJson array [✔]
↪ Acceptance: Avatar selector when selectable avatars is enabled::selectable avatars [✔]
↪ Acceptance: Group Members::Viewing Members as an admin user [✔]
↪ lib:category-link::topic count [✔]
↪ Acceptance: Composer::Image resizing buttons [✔]
↪ Acceptance: User::Invites [✔]
↪ widget:base::hbs template - no tagName [✔]
↪ model:composer::prependText [✔]
↪ Acceptance: Topic featured links::Converting to a public topic [✔]
↪ lib:click-track::does not update badge clicks in my own post [✔]
↪ model: user-action::collapsing likes [✔]
↪ Acceptance: Review::It returns a list of reviewable items [✔]
↪ widget:post::via-email [✔]
↪ lib:pretty-text::urls [✔]
↪ d-editor::advanced code [✔]
↪ lib:category-link::recursive [✔]
↪ Acceptance: Managing Group Tag Notification Defaults::As an anonymous user [✔]
↪ widget:base::hbs template - with data attributes [✔]
↪ mixin:setting-object::flat array [✔]
↪ widget:post-menu::add extra button [✔]
↪ lib:get-url::isAbsoluteURL [✔]
↪ time-input::allows mutations through actions [✔]
↪ Acceptance: Tags listed by group::list the tags in groups [✔]
↪ widget:post::reply directly above [✔]
↪ d-editor::preview updates with markdown [✔]
↪ controller:topic::canDeleteSelected [✔]
↪ lib:click-track::does not track clicks on category badges [✔]
↪ controller:bookmark::showLaterToday returns false if >= 5PM [✔]
↪ model:post-stream::loadIntoIdentityMap with post ids [✔]
↪ Acceptance: Plugin Keyboard Shortcuts - Anonymous::a plugin can add a keyboard shortcut with an option [✔]
↪ Acceptance: Managing Group Category Notification Defaults::As an admin [✔]
↪ widget:user-menu::private messages - disabled [✔]
↪ lib:click-track::tracks external URLs when opening in another window [✔]
↪ Acceptance: Topic - Anonymous::Enter a 404 topic [✔]
↪ Acceptance: Composer::Composer can toggle whispers [✔]
↪ Acceptance: Topic Notifications button::Updating topic notification level [✔]
↪ d-editor::replace-text event: selection spanning needle becomes selection spanning replacement [✔]
↪ widget:base::magic attaching by name [✔]
↪ model:post-stream::findPostIdForPostNumber [✔]
↪ lib:highlight-search::highlighting unicode text [✔]
↪ model:post-stream::closestDaysAgoFor [✔]
↪ Acceptance: NotificationsFilter::Notifications filter true [✔]
↪ widget:post::post - links [✔]
↪ lib:pretty-text::images [✔]
↪ model: Post::destroy by non-staff [✔]
↪ lib:pretty-text::links with full urls [✔]
↪ service:store::destroyRecord [✔]
↪ Acceptance: Topic move posts::default [✔]
↪ lib:url::routeTo with prefixUnhandled request in test environment: /forum/topics/timings (POST)
undefined
 [✘]
↪ Acceptance: Account Created::account created - update email - cancel [✘]
↪ widget:hamburger-menu::staff menu - not staff [✘]
↪ widget:post::replies - one below, suppressed [✘]
↪ model:topic::defaults [✔]
↪ select-kit/single-select::options.limitMatches [✘]
↪ lib:click-track::it opens in a new tab when pressing ctrl [✔]
↪ secret-value-list::adding a value [✘]
↪ lib:text-direction::isRTL [✔]
↪ Acceptance: Composer::Checks for existing draft [✘]
↪ widget:post::topic map not shown [✘]
↪ widget:home-logo::mobile logo [✘]
↪ Acceptance: Modal::rawTitle in modal panels [✘]
↪ Acceptance: Personal Message::suggested messages [✘]
↪ Acceptance: Topic Discovery::Clearing state after leaving a category [✘]
↪ Acceptance: About::viewing [✘]
↪ model:topic::has details [✔]
↪ widget:header::sign up / login buttons [✘]
↪ lib:utilities::avatarUrl [✔]
↪ lib:pretty-text::buildOptions [✔]
↪ Acceptance: Dashboard::reports tab [✘]
↪ Acceptance: Topic - Edit timer::default [✘]
↪ Acceptance: Forgot password::requesting password reset [✘]
↪ select-kit/notifications-button::default [✘]
↪ widget:post::show group request in post [✘]
↪ widget:widget-dropdown::content with icon [✘]
↪ lib:to-markdown::keeps mention/hash class [✔]
↪ Acceptance: Admin - Users List::toggles email visibility [✘]
↪ Acceptance: User Directory::Visit Without Usernames [✘]
↪ select-kit/combo-box::options.{caretUpIcon,caretDownIcon} [✘]
↪ Acceptance: Unknown::Permalink Unknown URL [✘]
↪ lib:uploads::new user cannot upload images [✔]
↪ lib:utilities::toAsciiPrintable [✔]
↪ model:topic::recover [✔]
↪ widget:hamburger-menu::staff menu [✘]
↪ Acceptance: User Preferences::font size change [✘]
↪ Acceptance: Dashboard: dashboard_visible_tabs::visible tabs [✘]
↪ select-kit/pinned-options::pinning [✘]
↪ lib:i18n::defaults [✔]
↪ model:user-drafts::stream [✔]
↪ lib:utilities::setDefaultHomepage [✔]
↪ d-editor::selecting the space after a word [✘]
↪ Acceptance: Managing Group Profile::As an admin [✘]
↪ Acceptance: Second Factor Backups::second factor backup [✘]
↪ Acceptance: User Anonymous::Filters [✘]
↪ Acceptance: New Message::accessing new-message route when logged out [✘]
↪ lib:key-value-store::is able to nuke the store [✔]
↪ Acceptance: Search - Full Page::update in:likes filter through advanced search ui [✘]
↪ d-button::disabled button [✘]
↪ lib:utilities::inCodeBlock [✔]
↪ Acceptance: Page Publishing::can publish a page via modal [✘]
↪ widget:poster-name::disable display name on posts [✘]
↪ Acceptance: Email Disabled Banner::when non-staff [✘]
↪ Acceptance: Search - Full Page::update in:seen filter through advanced search ui [✘]
↪ Acceptance: Emoji::emoji is cooked properly [✘]
↪ Acceptance: Composer Actions::replying to first post - reply_as_private_message [✘]
↪ admin-report::no data [✘]
↪ controller:bookmark::showLaterToday when later today is before the end of the day, show [✔]
↪ lib:user-search::it places groups unconditionally for exact match [✔]
↪ date-time-input::can hide time [✘]
↪ lib:pretty-text:bbcode::block with multiple quoted attributes [✔]
↪ model:invite::create [✔]
↪ Acceptance: Tags intersection::Populate tags when creating new topic [✘]
↪ model:topic-details::defaults [✔]
↪ widget:base::custom attrs to a magic attached widget [✘]
↪ widget:user-menu::basics [✘]
↪ select-kit/list-setting::default [✘]
↪ model: Post::firstPost [✔]
↪ lib:bookmark::formattedReminderTime works when the reminder time is in the future [✔]
↪ model:composer::Post length for private messages with non human users [✔]
↪ lib:text-direction::isLTR [✔]
↪ controller:bookmark::laterThisWeek gets 2 days from now [✔]
↪ lib:formatter::number [✔]
↪ result-set::defaults [✔]
↪ Acceptance: Encoded Sub Category Discovery::Visit subcategory by slug [✘]
↪ lib:uploads::new user cannot upload attachments [✔]
↪ lib:category-link::undefined color [✔]
↪ Acceptance: CategoryChooser::filter is case insensitive [✘]
↪ Acceptance: Search - Full Page::update status through advanced search ui [✘]
↪ model:post-stream::triggerRecoveredPost [✔]
↪ d-button::link-styled button [✘]
↪ widget:post::bookmark [✘]
↪ Acceptance: User::Messages [✘]
↪ select-kit/category-drop::countSubcategories (true) [✘]
↪ Acceptance: Admin - User Emails::viewing self without secondary emails [✘]
↪ rest-model::munging [✔]
↪ widget:widget-dropdown::dropdown id [✘]
↪ widget:widget-dropdown::content with label [✘]
↪ component:group-membership-button::userIsGroupUser [✔]
↪ Acceptance: Dashboard: dashboard_hidden_reports::hidden reports [✘]
↪ widget:topic-participant::one post [✘]
↪ model:topic::has suggestedTopics [✔]
↪ d-editor::selecting the space before a word [✘]
↪ themes-list::current tab is themes [✘]
↪ select-kit/single-select::valueAttribute (deprecated) [✘]
↪ model:composer::appendText [✔]
↪ Acceptance: Composer Actions::replying to post - reply_as_new_topic [✘]
↪ controller:bookmark::showLaterThisWeek returns false if > Thursday [✔]
↪ Report::thirtyDaysTrend [✔]
↪ simple-list::delimiter support [✘]
↪ Acceptance: User Preferences disabling dark mode::shows option to disable dark mode [✘]
↪ Acceptance: Badges::shows correct badge titles to choose from [✘]
↪ Acceptance: Admin - User Emails::viewing self with multiple secondary emails [✘]
↪ widget:avatar-flair::avatar flair with an image [✘]
↪ controller:reorder-categories::reorder places subcategories after their parent categories, while maintaining the relative order [✔]
↪ lib:click-track::does not track clicks on lightboxes [✔]
↪ Acceptance: User::Unicode usernames [✘]
↪ Acceptance: Search - Full Page::update username through advanced search ui [✔]
↪ lib:get-url::withoutPrefix [✔]
↪ Acceptance: Topic::Reply as new message [✘]
↪ select-kit/category-drop::category url [✘]
↪ model:badge::save [✔]
↪ controller:bookmark::showLaterToday when later today is tomorrow do not show [✔]
↪ lib:click-track::tracks external URLs [✔]
↪ model:composer::missingTitleCharacters [✔]
↪ d-editor::list button with a selection [✘]
↪ lib:pretty-text::New Lines [✔]
↪ model:topic::fancyTitle [✔]
↪ Acceptance: Signing In::second factor [✔]
↪ d-button::isLoading button [✘]
↪ Acceptance: Managing Group Membership::As an admin [✘]
↪ text-field::support a placeholder [✘]
↪ model:post-stream::closestDaysAgoFor - empty [✔]
↪ controller:bookmark::opening the modal with an existing bookmark with reminder at prefills the custom reminder type [✔]
↪ lib:highlight-search::highlighting text [✔]
↪ Acceptance: Topic move posts::moving posts from personal message [✘]
↪ model:post-stream::loadedAllPosts when the id changes [✔]
↪ service:document-title::it doesn't increment background context counts when focused [✔]
↪ mixin:setting-object::no values [✔]
↪ Acceptance: User Preferences::email field always shows up [✘]
↪ Acceptance: Topic featured links::View Hidden Replies [✘]
↪ d-editor::italic button with no selection [✘]
↪ model:topic-tracking-state::tag counts [✔]
↪ select-kit/single-select::labelProperty [✘]
↪ Acceptance: Search::search scope checkbox [✘]
↪ controller:create-account::basicUsernameValidation [✔]
↪ widget:base::buildAttributes [✘]
↪ Acceptance: Composer Actions::editing post [✘]
↪ select-kit/category-drop::allow_uncategorized_topics (true) [✘]
↪ Acceptance: Dashboard::activity metrics [✘]
↪ mixin:setting-object::value/name properties defined [✔]
↪ model:user::muted ids [✔]
↪ lib:utilities::caretRowCol [✔]
↪ Acceptance: Click Track::Do not track mentions [✔]
↪ lib:pretty-text::video - mapped url - secure media enabled [✔]
↪ Acceptance: Topic list tracking::Navigation [✘]
↪ Acceptance: Composer::can reply to a private message

Tests timed out
rake aborted!
Command failed with status (124): [node /var/www/discourse/test/run-qunit.js ...]
/var/www/discourse/lib/tasks/qunit.rake:97:in `block in <main>'
/var/www/discourse/bundle/ruby/2.6.0/gems/rake-13.0.1/exe/rake:27:in `<top (required)>'
/usr/local/bin/bundle:23:in `load'
/usr/local/bin/bundle:23:in `<main>'
Tasks: TOP => qunit:test
(See full trace by running task with --trace)
2416:signal-handler (1596805850) Received SIGTERM scheduling shutdown...
2020-08-07 13:10:50.992 UTC [2436] LOG:  received smart shutdown request
2020-08-07 13:10:50.993 UTC [2436] LOG:  background worker "logical replication launcher" (PID 2444) exited with exit code 1
2020-08-07 13:10:50.993 UTC [2439] LOG:  shutting down
2020-08-07 13:10:51.003 UTC [2436] LOG:  database system is shut down
2416:M 07 Aug 2020 13:10:51.058 # User requested shutdown...
2416:M 07 Aug 2020 13:10:51.058 # Redis is now ready to exit, bye bye...
Terminating